(()=>{"use strict";let t=document.getElementById("canvas"),i=t.getContext("2d");var s=500,h=1e3;t.width=h,t.height=s,t.style.background="#ff8";let o,a=function(t,i){return Math.random()*(i-t)+t},n=Date.now(),e=0;class r{constructor(t,i,s,h,o,a){this.position_x=t,this.position_y=i,this.radius=s,this.speed=h,this.dx=Math.cos(o)*this.speed,this.dy=Math.sin(o)*this.speed,this.color=a}draw(t){t.beginPath(),t.arc(this.position_x,this.position_y,this.radius,0,2*Math.PI),t.fill(),t.fillStyle=this.color,t.closePath()}update(){i&&this.draw(i),this.position_x+this.radius>h&&(this.position_x=h-this.radius,this.dx=-this.dx),this.position_x-this.radius<0&&(this.position_x=this.radius,this.dx=-this.dx),this.position_y-this.radius<0&&(this.position_y=this.radius,this.dy=-this.dy),this.position_y+this.radius>s&&(this.position_y=s-this.radius,this.dy=-this.dy),this.position_x+=this.dx/o,this.position_y+=this.dy/o}calculateDistance(t){const i=Math.abs(this.position_x-t.position_x),s=Math.abs(this.position_y-t.position_y);return{cur:Math.sqrt(i**2+s**2)}}calculateAngle(t){const i=Math.abs(this.position_x-t.position_x),s=Math.abs(this.position_y-t.position_y),h=!((this.position_x-t.position_x)*(this.position_y-t.position_y)<0),o=Math.atan(s/i),a=h?this.dx*Math.cos(o)+this.dy*Math.sin(o):this.dx*Math.cos(o)-this.dy*Math.sin(o),n=h?-this.dx*Math.sin(o)+this.dy*Math.cos(o):this.dx*Math.sin(o)+this.dy*Math.cos(o),e=h?t.dx*Math.cos(o)+t.dy*Math.sin(o):t.dx*Math.cos(o)-t.dy*Math.sin(o),r=h?-t.dx*Math.sin(o)+t.dy*Math.cos(o):t.dx*Math.sin(o)+t.dy*Math.cos(o),d=e,c=a;return{nx:h?d*Math.cos(o)-n*Math.sin(o):d*Math.cos(o)+n*Math.sin(o),ny:h?d*Math.sin(o)+n*Math.cos(o):-d*Math.sin(o)+n*Math.cos(o),nOtherX:h?c*Math.cos(o)-r*Math.sin(o):c*Math.cos(o)+r*Math.sin(o),nOtherY:-c*Math.sin(o)+r*Math.cos(o)}}checkAngleRange(t){return t>=360?t-=360:t<0&&(t+=360),t}calcualateDistance(t,i){const s=Math.pow(t.position_x-i.position_x,2),h=Math.pow(t.position_y-i.position_y,2);return{After:{MoveBetween:Math.sqrt(s+h),Between:i.radius+this.radius}}}bounceBall(t){const{cur:i}=this.calculateDistance(t),{nx:s,ny:h,nOtherX:o,nOtherY:a}=this.calculateAngle(t);i<=this.radius+t.radius&&(this.dx=s,this.dy=h,t.dx=o,t.dy=a)}}var d=[];let c=Math.floor(a(10,20));for(var M=0;M<c;M++){for(var p=a(10,20),l=a(p,h-p),u=a(p,s-p),y=a(200,400),x=a(0,2*Math.PI),_=0;_<d.length;_++)f=l,w=u,g=d[_].position_x,b=d[_].position_y,Math.sqrt(Math.pow(g-f,2)+Math.pow(b-w,2))-(p+d[_].radius)<4&&(l=a(p,h-p),u=a(p,s-p));let t=new r(l,u,p,y,x,`rgb(\n      ${Math.floor(255*Math.random())}, \n      ${Math.floor(255*Math.random())},\n      ${Math.floor(255*Math.random())}\n      )`);d.push(t)}var f,w,g,b;let m=()=>{requestAnimationFrame(m);const t=Date.now();e++,o=1e3*e/(t-n),null==i||i.clearRect(0,0,h,s),d.forEach(((t,i)=>{d.forEach((s=>{d.indexOf(s)!==i&&t.bounceBall(s)})),t.update()}))};m()})();